import { useState } from "react";
import { Meta, Story, Preview, Props } from "@storybook/addon-docs/blocks";
import DrawerTreeSelect from "./index";
import { generateTreeList } from "../../utils/data/tree";
import { Helper } from "./story/helper";
let treeData = generateTreeList("0", 2);

<Meta title="Components/Select/DrawerTreeSelect" component={DrawerTreeSelect} />

# DrawerTreeSelect

Компонент `DrawerTreeSelect`. Работает как обычный `TreeSelect` только для
выбора открывается `Drawer`.

## Basic

<Preview>
  <Story name="Basic">
    <DrawerTreeSelect
      placeholder="Select tree"
      showSearch
      multiple
      allowClear
      treeCheckable={true}
      showCheckAll={true}
      treeData={treeData}
    />
  </Story>
</Preview>

## Flat List

<Preview>
  <Story name="Flat list">
    <DrawerTreeSelect
      placeholder="Select tree"
      showSearch
      allowClear
      treeCheckable={true}
      isFlatList={true}
      treeNodeFilterProp="title"
      value=""
      treeData={[
        { key: 1, title: "23", additional: "123", children: [] },
        { key: 2, title: "1234", additional: "123", children: [] },
        { key: 3, title: "123456", additional: "123", children: [] },
        { key: 4, title: "1234567", additional: "123", children: [] },
        { key: 5, title: "12345678", additional: "123", children: [] },
        { key: 6, title: "23", additional: "123", children: [] },
        { key: 7, title: "1234", additional: "123", children: [] },
        { key: 8, title: "123456", additional: "123", children: [] },
        { key: 9, title: "1234567", additional: "123", children: [] },
        { key: 10, title: "12345678", additional: "123", children: [] },
        { key: 15, title: "23", additional: "123", children: [] },
        { key: 11, title: "1234", additional: "123", children: [] },
        { key: 12, title: "123456", additional: "123", children: [] },
        { key: 13, title: "1234567", additional: "123", children: [] },
        { key: 14, title: "12345678", additional: "123", children: [] },
        { key: 16, title: "23", additional: "123", children: [] },
        { key: 17, title: "1234", additional: "123", children: [] },
        { key: 18, title: "123456", additional: "123", children: [] },
        { key: 19, title: "1234567", additional: "123", children: [] },
        { key: 20, title: "12345678", additional: "123", children: [] },
        { key: 21, title: "23", additional: "123", children: [] },
        { key: 22, title: "1234", additional: "123", children: [] },
        { key: 23, title: "123456", additional: "123", children: [] },
        { key: 24, title: "1234567", additional: "123", children: [] },
        { key: 25, title: "12345678", additional: "123", children: [] },
        { key: 26, title: "23", additional: "123", children: [] },
        { key: 27, title: "1234", additional: "123", children: [] },
        { key: 28, title: "123456", additional: "123", children: [] },
        { key: 29, title: "1234567", additional: "123", children: [] },
        { key: 30, title: "12345678", additional: "123", children: [] }
      ]}
      onChange={(value, selected) => {
        console.log(value, selected);
      }}
    />
  </Story>
</Preview>

## With format

<Preview>
  <Story name="With format">
    <DrawerTreeSelect
      placeholder="Select tree"
      showSearch
      allowClear
      treeCheckable={true}
      treeNodeFilterProp="title"
      value=""
      formatRender={({ onChange }) => {
        return <Helper onChange={onChange} />;
      }}
      loadData={filters => {
        console.log(filters.formats);
        if (filters.formats) {
          return [
            { key: 1, title: "345", additional: "123", children: [] },
            { key: 2, title: "3456", additional: "123", children: [] },
            { key: 3, title: "34567", additional: "123", children: [] },
            { key: 4, title: "345678", additional: "123", children: [] },
            { key: 5, title: "3456789", additional: "123", children: [] }
          ];
        }
        return {
          data: [
            { key: 1, title: "23", additional: "123", children: [] },
            { key: 2, title: "1234", additional: "123", children: [] },
            { key: 3, title: "123456", additional: "123", children: [] },
            { key: 4, title: "1234567", additional: "123", children: [] },
            { key: 5, title: "12345678", additional: "123", children: [] },
            { key: 6, title: "23", additional: "123", children: [] },
            { key: 7, title: "1234", additional: "123", children: [] },
            { key: 8, title: "123456", additional: "123", children: [] },
            { key: 9, title: "1234567", additional: "123", children: [] },
            { key: 10, title: "12345678", additional: "123", children: [] },
            { key: 15, title: "23", additional: "123", children: [] },
            { key: 11, title: "1234", additional: "123", children: [] },
            { key: 12, title: "123456", additional: "123", children: [] },
            { key: 13, title: "1234567", additional: "123", children: [] },
            { key: 14, title: "12345678", additional: "123", children: [] },
            { key: 16, title: "23", additional: "123", children: [] },
            { key: 17, title: "1234", additional: "123", children: [] },
            { key: 18, title: "123456", additional: "123", children: [] },
            { key: 19, title: "1234567", additional: "123", children: [] },
            { key: 20, title: "12345678", additional: "123", children: [] },
            { key: 21, title: "23", additional: "123", children: [] },
            { key: 22, title: "1234", additional: "123", children: [] },
            { key: 23, title: "123456", additional: "123", children: [] },
            { key: 24, title: "1234567", additional: "123", children: [] },
            { key: 25, title: "12345678", additional: "123", children: [] },
            { key: 26, title: "23", additional: "123", children: [] },
            { key: 27, title: "1234", additional: "123", children: [] },
            { key: 28, title: "123456", additional: "123", children: [] },
            { key: 29, title: "1234567", additional: "123", children: [] },
            { key: 30, title: "12345678", additional: "123", children: [] }
          ]
        };
      }}
      onChange={(value, selected) => {
        console.log(value, selected);
      }}
    />
  </Story>
</Preview>

## With levels

<Preview>
  <Story name="With levels">
    <DrawerTreeSelect
      placeholder="Select tree"
      showSearch
      showLevels
      allowClear
      treeCheckable={true}
      treeNodeFilterProp="title"
      value=""
      formatRender={({ onChange }) => {
        return <Helper onChange={onChange} />;
      }}
      loadData={filters => {
        if (filters.level) {
          return new Promise(resolve => {
            setTimeout(() => {
              resolve({
                data: [
                  { key: 1, title: "345", additional: "123", children: [] },
                  { key: 2, title: "3456", additional: "123", children: [] },
                  { key: 3, title: "34567", additional: "123", children: [] },
                  { key: 4, title: "345678", additional: "123", children: [] },
                  { key: 5, title: "3456789", additional: "123", children: [] }
                ],
                levels: 4
              });
            }, 2000);
          });
        }
        return {
          data: [
            { key: 1, title: "23", additional: "123", children: [] },
            { key: 2, title: "1234", additional: "123", children: [] },
            { key: 3, title: "123456", additional: "123", children: [] },
            { key: 4, title: "1234567", additional: "123", children: [] },
            { key: 5, title: "12345678", additional: "123", children: [] },
            { key: 6, title: "23", additional: "123", children: [] },
            { key: 7, title: "1234", additional: "123", children: [] },
            { key: 8, title: "123456", additional: "123", children: [] },
            { key: 9, title: "1234567", additional: "123", children: [] },
            { key: 10, title: "12345678", additional: "123", children: [] },
            { key: 15, title: "23", additional: "123", children: [] },
            { key: 11, title: "1234", additional: "123", children: [] },
            { key: 12, title: "123456", additional: "123", children: [] },
            { key: 13, title: "1234567", additional: "123", children: [] },
            { key: 14, title: "12345678", additional: "123", children: [] },
            { key: 16, title: "23", additional: "123", children: [] },
            { key: 17, title: "1234", additional: "123", children: [] },
            { key: 18, title: "123456", additional: "123", children: [] },
            { key: 19, title: "1234567", additional: "123", children: [] },
            { key: 20, title: "12345678", additional: "123", children: [] },
            { key: 21, title: "23", additional: "123", children: [] },
            { key: 22, title: "1234", additional: "123", children: [] },
            { key: 23, title: "123456", additional: "123", children: [] },
            { key: 24, title: "1234567", additional: "123", children: [] },
            { key: 25, title: "12345678", additional: "123", children: [] },
            { key: 26, title: "23", additional: "123", children: [] },
            { key: 27, title: "1234", additional: "123", children: [] },
            { key: 28, title: "123456", additional: "123", children: [] },
            { key: 29, title: "1234567", additional: "123", children: [] },
            { key: 30, title: "12345678", additional: "123", children: [] }
          ],
          levels: 4
        };
      }}
      onChange={(value, selected) => {
        console.log(value, selected);
      }}
    />
  </Story>
</Preview>

## Props

- [**antd/drawer**](https://ant.design/components/drawer/#API)

<Props of={DrawerTreeSelect} />
